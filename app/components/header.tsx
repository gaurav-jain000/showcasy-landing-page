import { Link } from "react-router";
import { Button } from "./ui/button";
import {
  CrossIcon,
  RightArrowIcon,
  MenuIcon,
  TopRightArrowIcon,
} from "./icons";
import { ThemeButton } from "./theme-buttons";
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerFooter,
  DrawerOverlay,
  DrawerPortal,
  DrawerTrigger,
} from "./ui/drawer";
import { navLinksArr, socialLinksArr } from "~/lib/shared";
import { useState } from "react";
import { Separator } from "./ui/separator";
import StayConnected from "./stay-connected";
import { motion } from "framer-motion";
import {
  popUpAnimationVariant,
  slideLeftAnimationVariant,
  slideUpAnimationVariant,
} from "~/lib/animations";

export default function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  return (
    <>
      <Drawer direction="top" open={isMenuOpen} onOpenChange={setIsMenuOpen}>
        <header
          className="py-5 flex items-center justify-between maximus relative z-50"
          style={{ pointerEvents: "all" }}
        >
          <Logo theme={isMenuOpen ? "dark" : "light"} sizeFactor={0.541} />
          <div className="flex gap-4 items-center">
            <ThemeButton
              className={`body-14 font-semibold max-sm:hidden ${
                isMenuOpen ? "text-neutral-50! hover:text-neutral-950!" : null
              }`}
              variant="outline"
            >
              Let&apos;s Talk
            </ThemeButton>
            {isMenuOpen ? (
              <DrawerClose>
                <ThemeButton
                  className={`body-14 ${
                    isMenuOpen
                      ? "text-neutral-50! hover:text-neutral-950!"
                      : null
                  }`}
                  variant="outline"
                  withIcon={false}
                >
                  <CrossIcon className="duration-300" />
                </ThemeButton>
              </DrawerClose>
            ) : (
              <DrawerTrigger>
                <ThemeButton
                  className="body-14"
                  variant="outline"
                  withIcon={false}
                >
                  <MenuIcon className="duration-300" />
                </ThemeButton>
              </DrawerTrigger>
            )}
            <DrawerContent className="data-[vaul-drawer-direction=top]:max-h-[100vh] h-screen! rounded-none! [animation-duration:700ms]! bg-neutral-950 z-10!">
              <motion.div
                variants={slideLeftAnimationVariant}
                initial="initial"
                animate="animate"
                className="maximus mx-auto w-full mt-20 lg:mt-30 grow flex flex-col gap-4 sm:gap-10 justify-between h-full 2xl:max-h-[777px]!"
              >
                <Separator className="bg-neutral-800" />
                <ul className="flex flex-col gap-4 sm:gap-8 justify-between grow">
                  {navLinksArr.map((link, link_index) => (
                    <motion.li
                      key={link.title}
                      variants={slideLeftAnimationVariant}
                    >
                      <DrawerClose asChild>
                        <Link
                          to={link.url}
                          className="theme-h2 text-neutral-50 flex items-center justify-between"
                        >
                          <span>
                            {link.title}{" "}
                            <span className="text-neutral-500 body-22 font-normal">
                              ({(link_index + 1).toString().padStart(2, "0")})
                            </span>
                          </span>
                          <ThemeButton
                            className={`body-14 max-sm:hidden ${
                              isMenuOpen
                                ? "text-neutral-50! hover:text-neutral-950!"
                                : null
                            }`}
                            variant="outline"
                            withIcon={false}
                          >
                            <RightArrowIcon className="text-2xl" />
                          </ThemeButton>
                        </Link>
                      </DrawerClose>
                    </motion.li>
                  ))}
                </ul>
                <Separator className="bg-neutral-800" />
                <DrawerFooter className="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-40 px-0! py-0 sm:pb-4 grow">
                  <motion.div
                    variants={popUpAnimationVariant}
                    className="flex flex-col gap-2 sm:gap-4 2xl:justify-between lg:col-span-2"
                  >
                    <h3 className="body-22 text-neutral-500 font-semibold">
                      Follow me.
                    </h3>
                    <div className="max-sm:flex max-sm:flex-wrap sm:grid sm:grid-cols-2 lg:grid-cols-4 sm:justify-between gap-y-2 gap-x-8 text-neutral-50">
                      {socialLinksArr.map((link) => (
                        <DrawerClose key={link.title} asChild>
                          <Button
                            variant={"ghost"}
                            asChild
                            className="px-0! size-auto! py-0! hover:bg-trasparent justify-start hover:text-white body-18 font-medium"
                          >
                            <a
                              href={link.url}
                              className="block"
                              target="_blank"
                              rel="noopener noreferrer me"
                            >
                              {link.title}
                              <TopRightArrowIcon className="size-[1.6em]" />
                            </a>
                          </Button>
                        </DrawerClose>
                      ))}
                    </div>
                  </motion.div>
                  <StayConnected className="2xl:justify-between max-sm:pb-2" />
                </DrawerFooter>
              </motion.div>
            </DrawerContent>
          </div>
        </header>
        {/* <DrawerPortal /> */}
        <DrawerOverlay className="hidden z-10!" />
      </Drawer>
    </>
  );
}

export function Logo({
  theme = "light",
  className,
  sizeFactor = 1,
}: {
  theme?: "light" | "dark";
  className?: string;
  sizeFactor?: number;
}) {
  return (
    <Link
      to="/"
      className={`font-bold text-3xl ${
        theme === "dark" ? "text-neutral-50" : "text-neutral-950"
      } ${className}`}
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width={217 * sizeFactor}
        height={48 * sizeFactor}
        viewBox="0 0 217 48"
      >
        <path
          d="M24.9661 18.6419L18.8151 19.0097C18.6558 18.2453 18.2283 17.589 17.5328 17.0409C16.8373 16.4784 15.9027 16.1972 14.729 16.1972C13.6857 16.1972 12.8091 16.4135 12.0991 16.8462C11.4036 17.2789 11.0558 17.8558 11.0558 18.577C11.0558 19.1539 11.2804 19.6515 11.7296 20.0698C12.1933 20.4736 12.983 20.7909 14.0987 21.0217L18.5109 21.8871C20.8727 22.3631 22.6332 23.1347 23.7924 24.202C24.9516 25.2693 25.5312 26.6756 25.5312 28.4207C25.5312 30.0217 25.0675 31.4207 24.1402 32.6179C23.2128 33.8006 21.9377 34.7308 20.3148 35.4087C18.692 36.0722 16.83 36.4039 14.729 36.4039C11.5123 36.4039 8.94755 35.7332 7.03489 34.3919C5.13672 33.0506 4.02825 31.2332 3.70947 28.94L10.2951 28.5938C10.5125 29.5746 11.0051 30.3174 11.7731 30.8222C12.541 31.327 13.5263 31.5794 14.729 31.5794C15.9027 31.5794 16.8518 31.3486 17.5763 30.8871C18.3152 30.4256 18.6847 29.8414 18.6847 29.1347C18.6847 27.9376 17.6415 27.1299 15.5549 26.7116L11.3601 25.8462C8.99827 25.3703 7.23775 24.5554 6.07856 23.4015C4.91938 22.2477 4.33978 20.7693 4.33978 18.9664C4.33978 17.4087 4.76723 16.0674 5.62213 14.9424C6.47703 13.8174 7.67245 12.952 9.20837 12.3462C10.7588 11.7405 12.57 11.4376 14.6421 11.4376C17.7139 11.4376 20.1265 12.0866 21.8797 13.3847C23.6475 14.6683 24.6763 16.4207 24.9661 18.6419Z"
          className="fill-neutral-400"
        />
        <path
          d="M34.1825 21.952V35.928H27.4665V3.69238H33.9651V16.0457H34.2694C34.8201 14.6179 35.7039 13.4929 36.9211 12.6707C38.1527 11.8486 39.6886 11.4376 41.5289 11.4376C43.2097 11.4376 44.6804 11.8054 45.941 12.5409C47.2016 13.2621 48.1797 14.3006 48.8752 15.6563C49.5852 17.0121 49.9402 18.6419 49.9402 20.5457V35.928H43.2024V21.7357C43.2024 20.2501 42.8184 19.089 42.0505 18.2525C41.297 17.4159 40.232 16.9977 38.8555 16.9977C37.9281 16.9977 37.1167 17.1996 36.4212 17.6034C35.7257 17.9929 35.1751 18.5554 34.7693 19.2909C34.3781 20.0265 34.1825 20.9135 34.1825 21.952Z"
          className="fill-neutral-400"
        />
        <path
          d="M63.9383 36.4039C61.4895 36.4039 59.3667 35.8847 57.57 34.8462C55.7877 33.7933 54.4112 32.3366 53.4404 30.476C52.484 28.601 52.0059 26.4232 52.0059 23.9424C52.0059 21.4328 52.484 19.2477 53.4404 17.3871C54.4112 15.5121 55.7877 14.0554 57.57 13.0169C59.3667 11.964 61.4895 11.4376 63.9383 11.4376C66.4016 11.4376 68.5243 11.964 70.3066 13.0169C72.1033 14.0554 73.4798 15.5121 74.4362 17.3871C75.407 19.2477 75.8924 21.4328 75.8924 23.9424C75.8924 26.4232 75.407 28.601 74.4362 30.476C73.4798 32.3366 72.1033 33.7933 70.3066 34.8462C68.5243 35.8847 66.4016 36.4039 63.9383 36.4039ZM63.9817 31.1683C65.0975 31.1683 66.0321 30.8582 66.7855 30.2381C67.539 29.6034 68.1041 28.7381 68.4808 27.6419C68.8721 26.5457 69.0677 25.2982 69.0677 23.8991C69.0677 22.4857 68.8721 21.2381 68.4808 20.1563C68.1041 19.0746 67.539 18.2236 66.7855 17.6034C66.0321 16.9832 65.0975 16.6732 63.9817 16.6732C62.8515 16.6732 61.9025 16.9832 61.1345 17.6034C60.381 18.2236 59.8087 19.0746 59.4174 20.1563C59.0407 21.2381 58.8523 22.4857 58.8523 23.8991C58.8523 25.2982 59.0407 26.5457 59.4174 27.6419C59.8087 28.7381 60.381 29.6034 61.1345 30.2381C61.9025 30.8582 62.8515 31.1683 63.9817 31.1683Z"
          className="fill-neutral-400"
        />
        <path
          d="M82.1311 35.928L75.5238 11.7405H82.3485L86.1086 28.0097H86.326L90.26 11.7405H96.9325L100.91 27.9015H101.127L104.822 11.7405H111.625L105.018 35.928H97.9106L93.7375 20.7188H93.4332L89.2602 35.928H82.1311Z"
          className="fill-neutral-400"
        />
        <path
          d="M123.189 36.4039C120.711 36.4039 118.581 35.8775 116.799 34.8246C115.017 33.7573 113.647 32.2933 112.691 30.4328C111.735 28.5578 111.257 26.3943 111.257 23.9424C111.257 21.4616 111.735 19.2837 112.691 17.4087C113.662 15.5337 115.038 14.0698 116.821 13.0169C118.603 11.964 120.726 11.4376 123.189 11.4376C125.305 11.4376 127.152 11.8198 128.731 12.5842C130.325 13.3486 131.586 14.4232 132.513 15.8078C133.441 17.1924 133.948 18.8222 134.035 20.6972H127.688C127.572 19.8895 127.326 19.1828 126.949 18.577C126.572 17.9712 126.072 17.5025 125.449 17.1707C124.826 16.839 124.102 16.6732 123.276 16.6732C122.233 16.6732 121.32 16.9544 120.537 17.5169C119.769 18.065 119.168 18.8799 118.733 19.9616C118.313 21.0289 118.103 22.327 118.103 23.8558C118.103 25.3847 118.313 26.6972 118.733 27.7933C119.168 28.8895 119.769 29.726 120.537 30.303C121.32 30.8799 122.233 31.1683 123.276 31.1683C124.435 31.1683 125.413 30.8078 126.21 30.0866C127.007 29.351 127.5 28.3414 127.688 27.0578H134.035C133.933 28.9039 133.433 30.5337 132.535 31.9472C131.637 33.3462 130.398 34.4424 128.818 35.2357C127.239 36.0145 125.362 36.4039 123.189 36.4039Z"
          className="fill-current"
        />
        <path
          d="M142.969 36.3823C141.433 36.3823 140.049 36.1155 138.817 35.5818C137.6 35.0337 136.644 34.226 135.948 33.1587C135.253 32.0914 134.905 30.7645 134.905 29.178C134.905 27.8222 135.151 26.6972 135.644 25.803C136.137 24.8943 136.81 24.1587 137.665 23.5962C138.52 23.0337 139.491 22.6082 140.578 22.3198C141.664 22.0313 142.816 21.8294 144.034 21.714C145.439 21.5842 146.569 21.4544 147.424 21.3246C148.279 21.1948 148.902 21.0001 149.293 20.7405C149.699 20.4664 149.902 20.077 149.902 19.5722V19.464C149.902 18.4688 149.583 17.6972 148.946 17.1491C148.323 16.601 147.439 16.327 146.294 16.327C145.091 16.327 144.128 16.5938 143.403 17.1275C142.693 17.6467 142.222 18.3102 141.99 19.1179L135.753 18.6203C136.071 17.1491 136.694 15.8799 137.622 14.8126C138.549 13.7308 139.745 12.9015 141.208 12.3246C142.686 11.7332 144.396 11.4376 146.337 11.4376C147.685 11.4376 148.975 11.5962 150.206 11.9135C151.438 12.2308 152.532 12.7212 153.488 13.3847C154.459 14.0337 155.227 14.8775 155.792 15.9159C156.357 16.9544 156.64 18.1876 156.64 19.6155V35.928H150.228V32.553H150.054C149.663 33.3174 149.141 33.9881 148.489 34.565C147.837 35.1275 147.055 35.5746 146.142 35.9063C145.229 36.2236 144.171 36.3823 142.969 36.3823ZM144.903 31.7525C145.888 31.7525 146.758 31.5578 147.511 31.1683C148.279 30.7645 148.873 30.2308 149.293 29.5674C149.728 28.8895 149.945 28.1323 149.945 27.2957V24.7212C149.743 24.851 149.453 24.9736 149.076 25.089C148.714 25.2044 148.308 25.3054 147.859 25.3919C147.41 25.4784 146.96 25.5578 146.511 25.6299C146.062 25.6876 145.656 25.7453 145.294 25.803C144.497 25.9183 143.802 26.1058 143.208 26.3655C142.614 26.6107 142.15 26.9496 141.817 27.3823C141.498 27.8006 141.338 28.327 141.338 28.9616C141.338 29.8703 141.672 30.5626 142.338 31.0385C143.005 31.5145 143.86 31.7525 144.903 31.7525Z"
          className="fill-current"
        />
        <path
          d="M179.853 18.6419L173.702 19.0097C173.543 18.2453 173.116 17.589 172.42 17.0409C171.725 16.4784 170.79 16.1972 169.616 16.1972C168.573 16.1972 167.696 16.4135 166.986 16.8462C166.291 17.2789 165.943 17.8558 165.943 18.577C165.943 19.1539 166.168 19.6515 166.617 20.0698C167.081 20.4736 167.87 20.7909 168.986 21.0217L173.398 21.8871C175.76 22.3631 177.52 23.1347 178.68 24.202C179.839 25.2693 180.418 26.6756 180.418 28.4207C180.418 30.0217 179.955 31.4207 179.027 32.6179C178.1 33.8006 176.825 34.7308 175.202 35.4087C173.579 36.0722 171.717 36.4039 169.616 36.4039C166.399 36.4039 163.835 35.7332 161.922 34.3919C160.024 33.0506 158.915 31.2332 158.597 28.94L165.182 28.5938C165.4 29.5746 165.892 30.3174 166.66 30.8222C167.428 31.327 168.414 31.5794 169.616 31.5794C170.79 31.5794 171.739 31.3486 172.463 30.8871C173.202 30.4256 173.572 29.8414 173.572 29.1347C173.572 27.9376 172.529 27.1299 170.442 26.7116L166.247 25.8462C163.885 25.3703 162.125 24.5554 160.966 23.4015C159.807 22.2477 159.227 20.7693 159.227 18.9664C159.227 17.4087 159.654 16.0674 160.509 14.9424C161.364 13.8174 162.56 12.952 164.096 12.3462C165.646 11.7405 167.457 11.4376 169.529 11.4376C172.601 11.4376 175.014 12.0866 176.767 13.3847C178.535 14.6683 179.564 16.4207 179.853 18.6419Z"
          className="fill-current"
        />
        <path
          d="M186.483 44.9712C185.628 44.9856 184.824 44.928 184.071 44.7981C183.332 44.6683 182.723 44.5025 182.245 44.3006L183.766 39.303L183.984 39.3462C185.114 39.678 186.078 39.7501 186.875 39.5626C187.686 39.3895 188.302 38.7549 188.722 37.6587L189.113 36.6203L180.419 11.7405H187.483L192.504 29.5025H192.765L197.851 11.7405H204.958L195.525 38.5457C195.076 39.8438 194.46 40.976 193.677 41.9424C192.91 42.9087 191.939 43.6515 190.765 44.1707C189.591 44.7044 188.164 44.9712 186.483 44.9712Z"
          className="fill-current"
        />
        <path
          d="M209.219 36.339C208.146 36.339 207.241 35.9784 206.502 35.2573C205.763 34.5361 205.393 33.6419 205.393 32.5746C205.393 31.5073 205.763 30.6131 206.502 29.8919C207.241 29.1707 208.146 28.8102 209.219 28.8102C210.291 28.8102 211.197 29.1707 211.936 29.8919C212.675 30.6131 213.044 31.5073 213.044 32.5746C213.044 33.6419 212.675 34.5361 211.936 35.2573C211.197 35.9784 210.291 36.339 209.219 36.339Z"
          className="fill-current"
        />
      </svg>
    </Link>
  );
}
